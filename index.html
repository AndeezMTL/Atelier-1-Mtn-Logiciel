<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
  </head>
  <script src='./node_modules/sql.js/dist/sql-asm.js'></script>
  <script>
    config = {
      locateFile: filename => `./node_modules/sql.js/dist/sql-wasm.wasm`
    }
    // The `initSqlJs` function is globally provided by all of the main dist files if loaded in the browser.
    // We must specify this locateFile function if we are loading a wasm file from anywhere other than the current html page's folder.
  
    initSqlJs(config).then(function(SQL){
      //Create the database
      const db = new SQL.Database();
      // Run a query without reading the results
      db.run("create table Utilisateur (nom VARCHAR(50),age INT,gender VARCHAR(50));");
      // Insert two rows: (1,111) and (2,222)
      db.run("insert into Utilisateur (nom, age, gender) values ('Ardene', 38, 'Female');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Joellyn', 19, 'Female');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Wit', 20, 'Male');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Reinald', 1, 'Male');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Clemens', 4, 'Male');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Hedy', 38, 'Female');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Rosalinde', 85, 'Agender');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Worden', 44, 'Male');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Matilda', 21, 'Female');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Ellyn', 43, 'Female');");
      db.run("insert into Utilisateur (nom, age, gender) values ('Ardene', 38, 'Female');");
      
      const stmt = db.prepare("SELECT nom, age, gender FROM Utilisateur  ");
      //const stmt2 = db.prepare("SELECT * FROM test WHERE col1 BETWEEN $start AND $end");
      //stmt2.getAsObject({$start:1, $end:1}); // {col1:1, col2:111}

      // Bind new values
     // stmt2.bind({$start:1, $end:2});
      while(stmt.step()) { //
        const row = stmt.getAsObject();
        console.log('Here is a row: ' + JSON.stringify(row));
      }
    });
  </script>
  <body>
    Output is in Javascript console
    <div><h1>Atelier 1</h1>
    <input type="text" placeholder="Search..." id="input" > <button onclick="">Submit</button></div>
    <ol>
      <li>Nom</li>
      <li>Age</li>
      <li>Genre</li>
    </ol>
  </body>
</html>
